<!-- Anti-Detection Dashboard Component -->
<div class="glass-effect rounded-2xl p-8 dashboard-card">
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-bold gradient-text orbitron">üõ°Ô∏è Anti-Detection System</h2>
    <div class="flex items-center space-x-2">
      <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
      <span class="text-green-400 text-sm font-semibold">ACTIVE</span>
    </div>
  </div>

  <!-- Safety Status -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="stat-card rounded-xl p-4">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-400 text-sm">Safety Score</p>
          <p class="text-2xl font-bold gradient-text" x-text="safetyScore">95%</p>
        </div>
        <div class="w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center">
          <i class="fas fa-shield-alt text-white"></i>
        </div>
      </div>
    </div>

    <div class="stat-card rounded-xl p-4">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-400 text-sm">Actions Today</p>
          <p class="text-2xl font-bold gradient-text" x-text="actionsToday">23/50</p>
        </div>
        <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-xl flex items-center justify-center">
          <i class="fas fa-chart-line text-white"></i>
        </div>
      </div>
    </div>

    <div class="stat-card rounded-xl p-4">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-gray-400 text-sm">Next Break</p>
          <p class="text-2xl font-bold gradient-text" x-text="nextBreak">15m</p>
        </div>
        <div class="w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center">
          <i class="fas fa-clock text-white"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Anti-Detection Features -->
  <div class="space-y-6">
    <!-- Smart Rate Limiting -->
    <div class="bg-gray-800/50 rounded-xl p-6">
      <h3 class="text-lg font-bold text-white mb-4 flex items-center">
        <i class="fas fa-brain mr-3 text-purple-400"></i>
        Smart Rate Limiting
      </h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <p class="text-gray-300 text-sm mb-2">Current Delay</p>
          <p class="text-white font-semibold" x-text="currentDelay">3m 45s</p>
        </div>
        <div>
          <p class="text-gray-300 text-sm mb-2">Risk Factor</p>
          <p class="text-white font-semibold" x-text="riskFactor">1.2x</p>
        </div>
        <div>
          <p class="text-gray-300 text-sm mb-2">Time Factor</p>
          <p class="text-white font-semibold" x-text="timeFactor">0.9x</p>
        </div>
        <div>
          <p class="text-gray-300 text-sm mb-2">Account Age Factor</p>
          <p class="text-white font-semibold" x-text="accountAgeFactor">1.5x</p>
        </div>
      </div>
    </div>

    <!-- Human Behavior Simulation -->
    <div class="bg-gray-800/50 rounded-xl p-6">
      <h3 class="text-lg font-bold text-white mb-4 flex items-center">
        <i class="fas fa-user mr-3 text-blue-400"></i>
        Human Behavior Simulation
      </h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="text-center">
          <div class="w-16 h-16 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center mx-auto mb-2">
            <i class="fas fa-mouse text-white text-xl"></i>
          </div>
          <p class="text-white font-semibold">Mouse Movements</p>
          <p class="text-gray-400 text-sm">Realistic patterns</p>
        </div>
        <div class="text-center">
          <div class="w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-2">
            <i class="fas fa-scroll text-white text-xl"></i>
          </div>
          <p class="text-white font-semibold">Scroll Behavior</p>
          <p class="text-gray-400 text-sm">Natural scrolling</p>
        </div>
        <div class="text-center">
          <div class="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center mx-auto mb-2">
            <i class="fas fa-clock text-white text-xl"></i>
          </div>
          <p class="text-white font-semibold">Thinking Time</p>
          <p class="text-gray-400 text-sm">Human delays</p>
        </div>
      </div>
    </div>

    <!-- Account Rotation -->
    <div class="bg-gray-800/50 rounded-xl p-6">
      <h3 class="text-lg font-bold text-white mb-4 flex items-center">
        <i class="fas fa-sync-alt mr-3 text-green-400"></i>
        Smart Account Rotation
      </h3>
      <div class="space-y-4">
        <div class="flex items-center justify-between">
          <span class="text-gray-300">Account Priority</span>
          <div class="flex space-x-2">
            <template x-for="account in accountPriorities" :key="account.id">
              <div class="flex items-center space-x-2">
                <div class="w-8 h-8 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
                  <span class="text-white text-xs font-bold" x-text="account.score"></span>
                </div>
                <span class="text-white text-sm" x-text="account.email"></span>
              </div>
            </template>
          </div>
        </div>
        <div class="flex items-center justify-between">
          <span class="text-gray-300">Next Rotation</span>
          <span class="text-white font-semibold" x-text="nextRotation">2h 15m</span>
        </div>
      </div>
    </div>

    <!-- Pattern Randomization -->
    <div class="bg-gray-800/50 rounded-xl p-6">
      <h3 class="text-lg font-bold text-white mb-4 flex items-center">
        <i class="fas fa-random mr-3 text-orange-400"></i>
        Pattern Randomization
      </h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <p class="text-gray-300 text-sm mb-2">Action Sequence</p>
          <div class="flex space-x-2">
            <span class="px-2 py-1 bg-purple-500/20 text-purple-300 rounded text-xs">Follow</span>
            <span class="px-2 py-1 bg-blue-500/20 text-blue-300 rounded text-xs">Like</span>
            <span class="px-2 py-1 bg-green-500/20 text-green-300 rounded text-xs">Comment</span>
          </div>
        </div>
        <div>
          <p class="text-gray-300 text-sm mb-2">Timing Pattern</p>
          <span class="px-3 py-1 bg-orange-500/20 text-orange-300 rounded-full text-sm" x-text="timingPattern">Mixed</span>
        </div>
      </div>
    </div>

    <!-- Safety Monitor -->
    <div class="bg-gray-800/50 rounded-xl p-6">
      <h3 class="text-lg font-bold text-white mb-4 flex items-center">
        <i class="fas fa-exclamation-triangle mr-3 text-yellow-400"></i>
        Safety Monitor
      </h3>
      <div class="space-y-3">
        <template x-for="warning in safetyWarnings" :key="warning">
          <div class="flex items-center space-x-3 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg">
            <i class="fas fa-exclamation-circle text-yellow-400"></i>
            <span class="text-yellow-300 text-sm" x-text="warning"></span>
          </div>
        </template>
        <div x-show="safetyWarnings.length === 0" class="text-center py-4">
          <i class="fas fa-check-circle text-green-400 text-2xl mb-2"></i>
          <p class="text-green-300 text-sm">All systems safe</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Control Panel -->
  <div class="mt-8 pt-6 border-t border-gray-700">
    <h3 class="text-lg font-bold text-white mb-4">Control Panel</h3>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <button @click="adjustSafetyLevel('conservative')" class="cyber-button bg-gradient-to-r from-red-600 to-pink-600 text-white py-3 rounded-xl font-semibold">
        <i class="fas fa-shield-alt mr-2"></i>Conservative Mode
      </button>
      <button @click="adjustSafetyLevel('balanced')" class="cyber-button bg-gradient-to-r from-yellow-600 to-orange-600 text-white py-3 rounded-xl font-semibold">
        <i class="fas fa-balance-scale mr-2"></i>Balanced Mode
      </button>
      <button @click="adjustSafetyLevel('aggressive')" class="cyber-button bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 rounded-xl font-semibold">
        <i class="fas fa-rocket mr-2"></i>Aggressive Mode
      </button>
    </div>
  </div>
</div>

<script>
// Anti-Detection Dashboard JavaScript
function antiDetectionDashboard() {
  return {
    safetyScore: 95,
    actionsToday: '23/50',
    nextBreak: '15m',
    currentDelay: '3m 45s',
    riskFactor: '1.2x',
    timeFactor: '0.9x',
    accountAgeFactor: '1.5x',
    timingPattern: 'Mixed',
    accountPriorities: [
      { id: 1, email: 'account1@fb.com', score: 95 },
      { id: 2, email: 'account2@fb.com', score: 87 },
      { id: 3, email: 'account3@fb.com', score: 92 }
    ],
    nextRotation: '2h 15m',
    safetyWarnings: [],

    init() {
      this.updateAntiDetectionStats();
      setInterval(() => this.updateAntiDetectionStats(), 30000); // Update every 30 seconds
    },

    async updateAntiDetectionStats() {
      try {
        const response = await fetch('/api/anti-detection/stats', {
          headers: { 'Authorization': 'Bearer ' + localStorage.getItem('token') }
        });
        
        if (response.ok) {
          const data = await response.json();
          this.safetyScore = data.safety_score;
          this.actionsToday = `${data.actions_today}/${data.daily_limit}`;
          this.nextBreak = data.next_break;
          this.currentDelay = data.current_delay;
          this.riskFactor = data.risk_factor;
          this.timeFactor = data.time_factor;
          this.accountAgeFactor = data.account_age_factor;
          this.timingPattern = data.timing_pattern;
          this.accountPriorities = data.account_priorities;
          this.nextRotation = data.next_rotation;
          this.safetyWarnings = data.safety_warnings;
        }
      } catch (error) {
        console.error('Error updating anti-detection stats:', error);
      }
    },

    async adjustSafetyLevel(level) {
      try {
        const response = await fetch('/api/anti-detection/safety-level', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': 'Bearer ' + localStorage.getItem('token')
          },
          body: JSON.stringify({ level: level })
        });

        if (response.ok) {
          alert(`Safety level changed to ${level} mode`);
          this.updateAntiDetectionStats();
        } else {
          alert('Failed to change safety level');
        }
      } catch (error) {
        alert('Error changing safety level');
      }
    }
  }
}
</script> 