# Render Free Tier Deployment Guide

## ğŸ†“ **Optimized for Render Free Tier**

This guide is specifically optimized for **dashboard.render.com** free tier deployment.

## Quick Start Commands

### For Render Web Service:
```bash
# Build Command
bundle install

# Start Command  
bundle exec rackup config.ru -p $PORT -o 0.0.0.0
```

### For Render Worker Service:
```bash
# Build Command
bundle install

# Start Command
bundle exec sidekiq -r ./app.rb -C ./config/sidekiq.yml
```

## ğŸ¯ **Free Tier Optimizations**

### **Resource Limits:**
- **Web Service**: 512MB RAM, 0.1 CPU
- **Worker Service**: 512MB RAM, 0.1 CPU  
- **Database**: 256MB RAM, 1GB storage
- **Redis**: 25MB RAM, 100MB storage

### **Performance Optimizations:**
- Reduced Sidekiq concurrency to 2 (from 5)
- Removed unnecessary gems to reduce bundle size
- Optimized database queries
- Minimal logging to save resources

## Environment Variables Required

### Web Service:
- `RACK_ENV`: production
- `JWT_SECRET`: (auto-generated by Render)
- `SESSION_SECRET`: (auto-generated by Render)
- `DATABASE_URL`: (auto-linked from database)
- `REDIS_URL`: (auto-linked from Redis)

### Worker Service:
- `RACK_ENV`: production
- `JWT_SECRET`: (shared from web service)
- `SESSION_SECRET`: (shared from web service)
- `DATABASE_URL`: (auto-linked from database)
- `REDIS_URL`: (auto-linked from Redis)

## ğŸš€ **Deployment Steps**

### **Option 1: Using render.yaml (Recommended)**
1. Push your code to GitHub
2. Go to [dashboard.render.com](https://dashboard.render.com)
3. Click "New" â†’ "Blueprint"
4. Connect your GitHub repository
5. Render will automatically create all services from `render.yaml`

### **Option 2: Manual Setup**
1. **Create Web Service:**
   - Repository: Your GitHub repo
   - Build Command: `bundle install`
   - Start Command: `bundle exec rackup config.ru -p $PORT -o 0.0.0.0`
   - Plan: **Free**

2. **Create PostgreSQL Database:**
   - Plan: **Free**
   - Link to web service

3. **Create Redis:**
   - Plan: **Free**
   - Link to web service

4. **Create Worker Service:**
   - Same repository
   - Build Command: `bundle install`
   - Start Command: `bundle exec sidekiq -r ./app.rb -C ./config/sidekiq.yml`
   - Plan: **Free**
   - Link to database and Redis

## âš ï¸ **Free Tier Limitations**

### **Sleep Mode:**
- Services sleep after 15 minutes of inactivity
- First request after sleep takes 30-60 seconds
- Perfect for development/testing

### **Resource Limits:**
- Limited CPU and memory
- Database has 1GB storage limit
- Redis has 100MB storage limit

### **Bandwidth:**
- 100GB bandwidth per month
- Sufficient for most use cases

## ğŸ”§ **Troubleshooting Free Tier Issues**

1. **Service sleeps too often**
   - Use external monitoring service to ping your app
   - Consider upgrading to paid plan for production

2. **Out of memory errors**
   - Reduce Sidekiq concurrency further
   - Optimize database queries
   - Remove unnecessary gems

3. **Database connection limits**
   - Free tier has limited connections
   - Use connection pooling
   - Close connections properly

4. **Build timeouts**
   - Optimize Gemfile (already done)
   - Remove unnecessary dependencies
   - Use precompiled gems when possible

## ğŸ“Š **Monitoring Free Tier Usage**

Check your usage in Render dashboard:
- **Services** â†’ Your service â†’ **Metrics**
- **Databases** â†’ Your database â†’ **Usage**
- **Redis** â†’ Your Redis â†’ **Usage**

## ğŸ’¡ **Pro Tips for Free Tier**

1. **Use Blueprint deployment** (render.yaml) for automatic setup
2. **Monitor resource usage** regularly
3. **Optimize images and assets** to reduce bandwidth
4. **Use efficient database queries** to stay within limits
5. **Consider upgrading** when you need more resources

## ğŸ‰ **Success Indicators**

Your deployment is successful when:
- âœ… All services show "Live" status
- âœ… Web service responds to requests
- âœ… Worker processes jobs
- âœ… Database connects properly
- âœ… Redis stores data
- âœ… No resource limit errors

## ğŸ“ **Support**

- **Render Documentation**: [render.com/docs](https://render.com/docs)
- **Free Tier Limits**: [render.com/docs/free](https://render.com/docs/free)
- **Community**: [render.com/community](https://render.com/community)
